"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{3713:(e,t,a)=>{a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l,wL:()=>d});var r=a(8045);a(5177);var s=a(6816);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},8904:(e,t,a)=>{a.r(t),a.d(t,{default:()=>el});var r=a(8045),s=a(3842),n=a(5177),l=a(5070),i=a(6198),o=a(2933),c=a(995),d=a(1868),u=a(4476),m=a(3725),x="AlertDialog",[h,f]=(0,o.A)(x,[d.Hs]),g=(0,d.Hs)(),p=e=>{let{__scopeAlertDialog:t,...a}=e,s=g(t);return(0,r.jsx)(d.bL,{...s,...a,modal:!0})};p.displayName=x,n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=g(a);return(0,r.jsx)(d.l9,{...n,...s,ref:t})}).displayName="AlertDialogTrigger";var j=e=>{let{__scopeAlertDialog:t,...a}=e,s=g(t);return(0,r.jsx)(d.ZL,{...s,...a})};j.displayName="AlertDialogPortal";var v=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=g(a);return(0,r.jsx)(d.hJ,{...n,...s,ref:t})});v.displayName="AlertDialogOverlay";var y="AlertDialogContent",[N,w]=h(y),b=(0,m.Dc)("AlertDialogContent"),k=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:s,...l}=e,i=g(a),o=n.useRef(null),m=(0,c.s)(t,o),x=n.useRef(null);return(0,r.jsx)(d.G$,{contentName:y,titleName:A,docsSlug:"alert-dialog",children:(0,r.jsx)(N,{scope:a,cancelRef:x,children:(0,r.jsxs)(d.UC,{role:"alertdialog",...i,...l,ref:m,onOpenAutoFocus:(0,u.mK)(l.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=x.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(b,{children:s}),(0,r.jsx)(z,{contentRef:o})]})})})});k.displayName=y;var A="AlertDialogTitle",D=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=g(a);return(0,r.jsx)(d.hE,{...n,...s,ref:t})});D.displayName=A;var C="AlertDialogDescription",R=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=g(a);return(0,r.jsx)(d.VY,{...n,...s,ref:t})});R.displayName=C;var F=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=g(a);return(0,r.jsx)(d.bm,{...n,...s,ref:t})});F.displayName="AlertDialogAction";var P="AlertDialogCancel",T=n.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=w(P,a),l=g(a),i=(0,c.s)(t,n);return(0,r.jsx)(d.bm,{...l,...s,ref:i})});T.displayName=P;var z=e=>{let{contentRef:t}=e,a="`".concat(y,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(y,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(y,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return n.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},M=a(6816),E=a(9155);function S(e){let{...t}=e;return(0,r.jsx)(p,{"data-slot":"alert-dialog",...t})}function _(e){let{...t}=e;return(0,r.jsx)(j,{"data-slot":"alert-dialog-portal",...t})}function L(e){let{className:t,...a}=e;return(0,r.jsx)(v,{"data-slot":"alert-dialog-overlay",className:(0,M.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function O(e){let{className:t,...a}=e;return(0,r.jsxs)(_,{children:[(0,r.jsx)(L,{}),(0,r.jsx)(k,{"data-slot":"alert-dialog-content",className:(0,M.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function H(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,M.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function I(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,M.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function Z(e){let{className:t,...a}=e;return(0,r.jsx)(D,{"data-slot":"alert-dialog-title",className:(0,M.cn)("text-lg font-semibold",t),...a})}function q(e){let{className:t,...a}=e;return(0,r.jsx)(R,{"data-slot":"alert-dialog-description",className:(0,M.cn)("text-muted-foreground text-sm",t),...a})}function B(e){let{className:t,...a}=e;return(0,r.jsx)(F,{className:(0,M.cn)((0,E.r)(),t),...a})}function Y(e){let{className:t,...a}=e;return(0,r.jsx)(T,{className:(0,M.cn)((0,E.r)({variant:"outline"}),t),...a})}var $=a(7023),G=a(3173),J=a(6436),K=a(2230),V=a(3713),Q=a(4805);let U=(0,Q.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),W=(0,Q.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),X=(0,Q.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function ee(e){let{artifact:t,className:a=""}=e,s="\n    aspect-square rounded-2xl \n    flex items-center justify-center overflow-hidden\n    shadow-sm\n    ".concat(a,"\n  ");switch(t.type){case"image":return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("img",{src:t.source_url,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"})});case"url":return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("div",{className:"w-full h-full bg-blue-500/20 flex items-center justify-center",children:(0,r.jsx)(U,{className:"w-8 h-8 text-blue-400"})})});case"video":return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("div",{className:"w-full h-full bg-red-500/20 flex items-center justify-center",children:(0,r.jsx)(W,{className:"w-8 h-8 text-red-400"})})});case"pdf":return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("div",{className:"w-full h-full bg-orange-500/20 flex items-center justify-center",children:(0,r.jsx)(X,{className:"w-8 h-8 text-orange-400"})})});case"figma":return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("div",{className:"w-full h-full bg-purple-500/20 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-500 text-white font-bold rounded-lg flex items-center justify-center text-lg",children:"F"})})});default:return(0,r.jsx)("div",{className:s,children:(0,r.jsx)("div",{className:"w-full h-full bg-gray-500/20 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-400 rounded-lg"})})})}}function et(e){let{artifacts:t}=e,a=t.length;return 0===a?(0,r.jsx)("div",{className:"w-full flex-1 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"No artifacts"})}):1===a?(0,r.jsx)("div",{className:"w-full flex-1 flex items-center justify-center p-6",children:(0,r.jsx)("div",{className:"w-32 h-32 transition-transform duration-500 group-hover:scale-105 group-hover:-translate-y-1",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[0]})})}):2===a?(0,r.jsxs)("div",{className:"w-full flex-1 relative flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute w-32 h-32 transform rotate-6 translate-x-3 translate-y-2 opacity-80 transition-transform duration-500 group-hover:rotate-8 group-hover:translate-x-4 group-hover:translate-y-1 group-hover:scale-105",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[1]})}),(0,r.jsx)("div",{className:"relative w-32 h-32 transform -rotate-3 -translate-x-2 -translate-y-2 z-10 transition-transform duration-500 group-hover:-rotate-5 group-hover:-translate-x-3 group-hover:-translate-y-3 group-hover:scale-105",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[0]})})]}):(0,r.jsxs)("div",{className:"w-full flex-1 relative flex items-center justify-center p-3",children:[(0,r.jsx)("div",{className:"absolute w-32 h-32 transform rotate-12 translate-x-6 translate-y-3 opacity-70 transition-transform duration-500 group-hover:rotate-15 group-hover:translate-x-8 group-hover:translate-y-2 group-hover:scale-105",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[2]})}),(0,r.jsx)("div",{className:"absolute w-32 h-32 transform rotate-6 translate-x-2 translate-y-1 opacity-85 transition-transform duration-500 group-hover:rotate-9 group-hover:translate-x-3 group-hover:-translate-y-1 group-hover:scale-105",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[1]})}),(0,r.jsx)("div",{className:"relative w-32 h-32 transform -rotate-3 -translate-x-3 -translate-y-2 z-10 transition-transform duration-500 group-hover:-rotate-6 group-hover:-translate-x-5 group-hover:-translate-y-4 group-hover:scale-105",style:{transitionTimingFunction:"var(--spring-elegant-easing-light)"},children:(0,r.jsx)(ee,{artifact:t[0]})}),t.length>3&&(0,r.jsx)("div",{className:"absolute top-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:t.length})]})}function ea(e){let{project:t,onClick:a,onDelete:s}=e;return(0,r.jsxs)(V.Zp,{className:"group hover:shadow-md cursor-pointer hover:scale-105 overflow-hidden aspect-[4/5] flex flex-col outline-none border-0",style:{transition:"all 500ms var(--spring-elegant-easing-light)"},onClick:a,children:[(0,r.jsx)(et,{artifacts:t.coverArtifacts}),(0,r.jsx)(V.wL,{className:"p-4 space-y-2 mt-auto",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"font-medium text-white line-clamp-1",children:t.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Last modified ",(e=>{let t=new Date(e),a=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5);return 1===a?"Yesterday":a<7?"".concat(a," days ago"):a<30?"".concat(Math.ceil(a/7)," weeks ago"):t.toLocaleDateString()})(t.updated_at)]})]})})]})}var er=a(7651),es=a(3283);async function en(e){let t=await (0,es.JQ)(e);return await Promise.all(t.map(async e=>{let t=await (0,es.yg)(e.id);return{...e,coverArtifacts:t.slice(0,3)}}))}function el(){let e=(0,l.useRouter)(),{user:t}=(0,i.A)(),{data:a=[],isLoading:o,error:c,mutate:d}=(0,s.Ay)(t?"projects-".concat(t.email):null,()=>t?en(t.email):[],{revalidateOnFocus:!1,dedupingInterval:3e4,refreshInterval:6e4}),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[p,j]=(0,n.useState)(null),[v,y]=(0,n.useState)("");async function N(){if(x){m(!0);try{await (0,es.xx)(x.id),d(),er.oR.success('Project "'.concat(x.name,'" deleted successfully')),h(null)}catch(e){er.oR.error("Failed to delete project. Please try again."),console.error("Error deleting project:",e)}finally{m(!1)}}}async function w(){if(p&&v.trim()){g(!0);try{await (0,es.vr)(p.id,{name:v.trim()}),d(),er.oR.success('Project renamed to "'.concat(v.trim(),'"')),j(null),y("")}catch(e){er.oR.error("Failed to rename project. Please try again."),console.error("Error renaming project:",e)}finally{g(!1)}}}return(0,r.jsxs)("div",{className:"h-screen flex flex-col bg-[var(--color-background-primary)] text-[var(--color-text-primary)]",children:[(0,r.jsx)(K.A,{mode:"homepage",onNewProject:function(){e.push("/projects/new")}}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o&&(0,r.jsx)("p",{children:"Loading…"}),c&&(0,r.jsx)("p",{className:"text-red-600",children:String(c)}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>(0,r.jsxs)(J.tz,{children:[(0,r.jsx)(J.Rc,{asChild:!0,children:(0,r.jsx)("div",{children:(0,r.jsx)(ea,{project:t,onClick:()=>{e.push("/p?token=".concat(t.share_token))},onDelete:()=>{h(t)}})})}),(0,r.jsxs)(J.Ip,{children:[(0,r.jsx)(J.kt,{onClick:()=>{j(t),y(t.name)},children:"Rename Project"}),(0,r.jsx)(J.kt,{variant:"destructive",onClick:()=>{h(t)},children:"Delete Project"})]})]},t.id))}),(0,r.jsx)(S,{open:!!x,onOpenChange:e=>!e&&h(null),children:(0,r.jsxs)(O,{children:[(0,r.jsxs)(H,{children:[(0,r.jsx)(Z,{children:"Delete Project"}),(0,r.jsxs)(q,{children:["Are you sure you want to delete “",null==x?void 0:x.name,"”? This will permanently delete the project and all its pages and artifacts. This action cannot be undone."]})]}),(0,r.jsxs)(I,{children:[(0,r.jsx)(Y,{children:"Cancel"}),(0,r.jsx)(B,{className:(0,E.r)({variant:"destructive"}),onClick:N,disabled:u,children:u?"Deleting...":"Delete"})]})]})}),(0,r.jsx)($.lG,{open:!!p,onOpenChange:e=>!e&&j(null),children:(0,r.jsxs)($.Cf,{children:[(0,r.jsxs)($.c7,{children:[(0,r.jsx)($.L3,{children:"Rename Project"}),(0,r.jsxs)($.rr,{children:["Enter a new name for “",null==p?void 0:p.name,"”"]})]}),(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)(G.p,{value:v,onChange:e=>y(e.target.value),placeholder:"Project name",onKeyDown:e=>{"Enter"===e.key&&v.trim()&&w()},autoFocus:!0})}),(0,r.jsxs)($.Es,{children:[(0,r.jsx)(E.$,{variant:"outline",onClick:()=>j(null),children:"Cancel"}),(0,r.jsx)(E.$,{onClick:w,disabled:f||!v.trim(),children:f?"Renaming...":"Rename"})]})]})})]})})]})}}}]);