(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{691:(e,t,r)=>{"use strict";function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(967)},1438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(6576).createAsyncLocalStorage)()},3326:(e,t,r)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),r(8045),r(4380),r(7269),r(7756)},4020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(6708)._(r(8436));function n(e,t){var r;let n={};"function"==typeof e&&(n.loader=e);let l={...n,...t};return(0,a.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6576:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return o}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return n?new n:new a}function s(e){return n?n.bind(e):a.bind(e)}function o(){return n?n.snapshot():function(e,...t){return e(...t)}}},7269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(1438)},7680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var a=r(8045),n=r(3842),l=r(5177),s=r(4020),o=r.n(s),i=r(5070);function d(e){let{onFiles:t,onUrl:r,onDragStateChange:n}=e,[s,o]=(0,l.useState)(!1),i=(0,l.useRef)(0),d=(0,l.useCallback)(e=>{o(e),null==n||n(e)},[n]);return(0,l.useEffect)(()=>{function e(e){var t,r;let a=Array.from(null!=(r=null==(t=e.dataTransfer)?void 0:t.types)?r:[]);return a.includes("Files")||a.includes("text/uri-list")||a.includes("text/plain")}function a(t){e(t)&&(i.current+=1,d(!0))}function n(t){e(t)&&t.preventDefault()}function l(t){e(t)&&(i.current=Math.max(0,i.current-1),0===i.current&&d(!1))}async function s(a){var n,l,s,o;if(!e(a))return;a.preventDefault(),i.current=0,d(!1);let c=Array.from(null!=(o=null==(n=a.dataTransfer)?void 0:n.files)?o:[]);if(c.length)return void await t(c);let u=(null==(l=a.dataTransfer)?void 0:l.getData("text/uri-list"))||(null==(s=a.dataTransfer)?void 0:s.getData("text/plain"));u&&r&&await r(u.trim())}return window.addEventListener("dragenter",a),window.addEventListener("dragover",n),window.addEventListener("dragleave",l),window.addEventListener("drop",s),()=>{window.removeEventListener("dragenter",a),window.removeEventListener("dragover",n),window.removeEventListener("dragleave",l),window.removeEventListener("drop",s)}},[t,r,d]),(0,a.jsx)("div",{className:"absolute inset-0 z-10",style:{pointerEvents:s?"auto":"none"},children:s&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-lg text-white/90 pointer-events-none",children:(0,a.jsxs)("div",{className:"text-center space-y-3 w-full max-w-xs px-6",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-white/10 border border-white/20",children:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",className:"h-6 w-6 text-white/90",children:[(0,a.jsx)("path",{d:"M12 16v-8m0 0 3 3m-3-3-3 3",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M6 17.5V18a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-.5",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Drop to upload your artifacts"}),(0,a.jsx)("div",{className:"text-xs text-white/70",children:"Images, videos, or PDFs up to 50MB each"}),(0,a.jsx)("div",{className:"h-1 w-full overflow-hidden rounded-full bg-white/10",children:(0,a.jsx)("div",{className:"h-full w-full animate-[progress_1.2s_linear_infinite] bg-white/70"})})]})})})}var c=r(6115),u=r(3283);async function f(e){return await (0,u.X5)(e)}var m=r(1905),h=r(6835),p=r(7651),g=r(8998),x=r(6198),v=r(786),y=r(7023),b=r(4476),j=r(995),w=r(2933),k=r(9654),N=r(874),_=r(5266),P=r(6644),C="Switch",[S,F]=(0,w.A)(C),[R,E]=S(C),M=l.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:d,value:c="on",onCheckedChange:u,form:f,...m}=e,[h,p]=l.useState(null),g=(0,j.s)(t,e=>p(e)),x=l.useRef(!1),v=!h||f||!!h.closest("form"),[y,w]=(0,k.i)({prop:s,defaultProp:null!=o&&o,onChange:u,caller:C});return(0,a.jsxs)(R,{scope:r,checked:y,disabled:d,children:[(0,a.jsx)(P.sG.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":T(y),"data-disabled":d?"":void 0,disabled:d,value:c,...m,ref:g,onClick:(0,b.mK)(e.onClick,e=>{w(e=>!e),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),v&&(0,a.jsx)(L,{control:h,bubbles:!x.current,name:n,value:c,checked:y,required:i,disabled:d,form:f,style:{transform:"translateX(-100%)"}})]})});M.displayName=C;var O="SwitchThumb",A=l.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,l=E(O,r);return(0,a.jsx)(P.sG.span,{"data-state":T(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:t})});A.displayName=O;var L=l.forwardRef((e,t)=>{let{__scopeSwitch:r,control:n,checked:s,bubbles:o=!0,...i}=e,d=l.useRef(null),c=(0,j.s)(d,t),u=(0,N.Z)(s),f=(0,_.X)(n);return l.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==s&&t){let r=new Event("click",{bubbles:o});t.call(e,s),e.dispatchEvent(r)}},[u,s,o]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:c,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function T(e){return e?"checked":"unchecked"}L.displayName="SwitchBubbleInput";var D=r(6816);function I(e){let{className:t,...r}=e;return(0,a.jsx)(M,{"data-slot":"switch",className:(0,D.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(A,{"data-slot":"switch-thumb",className:(0,D.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var z=r(9155);let U=(0,r(4805).A)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function B(e){let{isReadOnly:t,onToggleReadOnly:r,projectInfo:n,userEmail:s}=e,[o,i]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{function e(e){if("/"===e.key&&!e.ctrlKey&&!e.metaKey&&!e.altKey){let t=e.target;"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),i(e=>!e))}}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.lG,{open:o,onOpenChange:i,children:(0,a.jsxs)(y.Cf,{className:"sm:max-w-lg",children:[(0,a.jsxs)(y.c7,{children:[(0,a.jsxs)(y.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(U,{className:"h-5 w-5 text-purple-600"}),"Dev Debug Panel"]}),(0,a.jsxs)(y.rr,{children:["Press ",(0,a.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-xs font-mono",children:"/"})," to toggle this panel"]})]}),(0,a.jsxs)("div",{className:"space-y-6 pt-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Permission Testing"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Simulate Read-Only Mode"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Test the viewer experience without logging into a different account"})]}),(0,a.jsx)(I,{checked:t,onCheckedChange:r})]}),t&&(0,a.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/20 p-3 rounded text-sm text-blue-600",children:"\uD83D\uDD12 Read-only mode active: All edit controls are hidden"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Current User"}),(0,a.jsxs)("div",{className:"bg-muted p-3 rounded-lg space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-muted-foreground",children:"Email:"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:s||"Not loaded"})]})]}),n&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Project Info"}),(0,a.jsxs)("div",{className:"bg-muted p-3 rounded-lg space-y-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"ID:"})," ",(0,a.jsx)("span",{className:"font-mono",children:n.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",(0,a.jsx)("span",{className:"font-medium",children:n.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Owner:"})," ",(0,a.jsx)("span",{className:"font-medium",children:n.creator_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Share Token:"})," ",(0,a.jsx)("span",{className:"font-mono",children:n.share_token})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Is Creator:"})," ",(0,a.jsx)("span",{className:n.creator_id===s?"text-green-600 font-medium":"text-orange-600",children:n.creator_id===s?"Yes âœ“":"No"})]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground border-t pt-4 space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Keyboard Shortcuts:"}),(0,a.jsxs)("ul",{className:"space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:"/"})," - Toggle this debug panel"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("kbd",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:"ESC"})," - Close this panel"]})]})]}),(0,a.jsx)("div",{className:"flex justify-end border-t pt-4",children:(0,a.jsx)(z.$,{variant:"outline",size:"sm",onClick:()=>{r(!1),i(!1)},children:"Reset & Close"})})]})]})})})}var X=r(8533);let G=o()(()=>Promise.all([r.e(982),r.e(240)]).then(r.bind(r,7859)),{loadableGenerated:{webpack:()=>[7859]},ssr:!1});async function K(e){return await (0,u.L1)(e)}function q(){let e=(0,i.useSearchParams)().get("token")||"",t=(0,i.useRouter)(),{user:s}=(0,x.A)(),[o,y]=(0,l.useState)(3),[b,j]=(0,l.useState)(!1),[w,k]=(0,l.useTransition)(),[N,_]=(0,l.useState)(!1),[P,C]=(0,l.useState)(!1),[S,F]=(0,l.useState)([]);(0,l.useEffect)(()=>{(null==s?void 0:s.email)&&e();async function e(){if(s)try{let{getUserFolders:e}=await Promise.resolve().then(r.bind(r,786)),t=await e(s.email);F(t)}catch(e){console.error("Failed to load folders:",e)}}},[s]);let[R,E]=(0,l.useState)({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0});(0,l.useEffect)(()=>{let e=window.localStorage.getItem("columns_in_view");e&&y(Math.min(8,Math.max(1,Number(e)))),_(!0)},[]),(0,l.useEffect)(()=>{N&&window.localStorage.setItem("columns_in_view",String(o))},[o,N]);let{data:M}=(0,n.Ay)(e?"project-token-".concat(e):null,()=>e?K(e):null,{revalidateOnFocus:!1}),O=function(e){let{user:t}=(0,x.A)(),[r,a]=(0,l.useState)([]),[n,s]=(0,l.useState)([]),[o,i]=(0,l.useState)(!0);(0,l.useEffect)(()=>{!async function(){if(!(null==e?void 0:e.id))return i(!1);try{let t=await (0,u.Qg)(e.id);if(a(t),e.folder_id){let t=await (0,v.Dl)(e.folder_id);s(t)}}catch(e){console.error("Failed to load project access:",e)}finally{i(!1)}}()},[null==e?void 0:e.id,null==e?void 0:e.folder_id]);let d=(0,l.useMemo)(()=>!!e&&!!t&&e.creator_id===t.email,[e,t]),c=(0,l.useMemo)(()=>!!t&&!d&&!o&&r.some(e=>e.user_email===t.email&&"editor"===e.role),[r,t,d,o]),f=(0,l.useMemo)(()=>!!t&&!d&&!o&&!!(null==e?void 0:e.folder_id)&&n.some(e=>e.user_email===t.email&&"editor"===e.role),[n,t,d,o,null==e?void 0:e.folder_id]),m=d||c||f;return{isCreator:d,canEdit:m,canView:!0,isReadOnly:!m,isCollaborator:c||f,isFolderCollaborator:f,loading:o}}(M||null),A=P||O.isReadOnly,L=!P&&O.canEdit,T=O.isCreator,D=O.isCollaborator,{pages:I,createPage:z,updatePage:U,deletePage:q}=function(e){let{data:t=[],error:r,isLoading:a,mutate:s}=(0,n.Ay)(e?"pages-".concat(e):null,()=>e?f(e):[],{revalidateOnFocus:!1}),o=(0,l.useCallback)(async t=>{if(!e)return null;try{let r=await (0,u.X7)("pages",e,"project_id"),a=await (0,u.a3)({project_id:e,name:t,position:r});return await s(),a}catch(e){throw console.error("Failed to create page:",e),e}},[e,s]),i=(0,l.useCallback)(async(t,r)=>{if(!e)return null;try{let e=await (0,u.XA)(t,r);return await s(),e}catch(e){throw console.error("Failed to update page:",e),e}},[e,s]);return{pages:t,isLoading:a,error:r,createPage:o,updatePage:i,deletePage:(0,l.useCallback)(async t=>{if(e)try{await (0,u.Db)(t),await s()}catch(e){throw console.error("Failed to delete page:",e),e}},[e,s]),reorderPages:(0,l.useCallback)(async t=>{if(e){s(t,!1);try{let e=t.map((e,t)=>({id:e.id,position:t}));await (0,u.oZ)(e),await s()}catch(e){throw await s(),console.error("Failed to reorder pages:",e),e}}},[e,s]),refetch:s}}(null==M?void 0:M.id),{currentPageId:H,selectPage:V}=function(e,t){let[r,a]=(0,l.useState)(null);(0,l.useEffect)(()=>{e.length>0&&!r&&a((e.find(e=>0===e.position)||e[0]).id)},[e,r]);let n=e.find(e=>e.id===r)||e[0]||null;return{currentPageId:r,currentPage:n,selectPage:e=>{a(e)},selectNextPage:()=>{if(!n||e.length<=1)return;let t=(e.findIndex(e=>e.id===n.id)+1)%e.length;a(e[t].id)},selectPreviousPage:()=>{if(!n||e.length<=1)return;let t=e.findIndex(e=>e.id===n.id),r=0===t?e.length-1:t-1;a(e[r].id)}}}(I,null==M||M.id),{artifacts:W,createArtifact:Q,reorderArtifacts:Z,updateArtifact:Y,deleteArtifact:$,refetch:J}=(0,m.C)(null==M?void 0:M.id,H||void 0);(0,l.useEffect)(()=>{(null==M?void 0:M.name)&&(document.title="".concat(M.name," | Artifact"))},[null==M?void 0:M.name]),(0,l.useEffect)(()=>{if(!(null==M?void 0:M.id))return;let e=setTimeout(async function(){if(M)try{let{updateProject:e}=await Promise.resolve().then(r.bind(r,3283));await e(M.id,{last_accessed_at:new Date().toISOString()})}catch(e){console.debug("Failed to track project access:",e)}},1e3);return()=>clearTimeout(e)},[M]);let ee=(0,l.useCallback)(async e=>{if(!(null==M?void 0:M.id)||!H||0===e.length)return;let{validateFile:t}=await Promise.resolve().then(r.bind(r,8998));for(let r of e){let e=t(r,{maxSizeMB:50});if(!e.valid)return void p.oR.error(e.error||"File too large")}E({uploading:!0,totalFiles:e.length,completedFiles:0,currentProgress:0});try{let t=0;for(let r of e){let a=await (0,g.QM)(r,r=>{let a=r.percentage,n=Math.round((100*t+a)/e.length);E(e=>({...e,currentProgress:n}))}),n=(0,g.lu)(a.mimeType),l="video"===n?{hideUI:!0,loop:!0,muted:!0}:{},s=(0,h.Rr)(n,a.fullUrl,r);await Q({type:n,source_url:a.fullUrl,file_path:a.url,name:s,metadata:l}),t++,E(r=>({...r,completedFiles:t,currentProgress:Math.round(t/e.length*100)}))}p.oR.success("Successfully uploaded ".concat(e.length," file").concat(e.length>1?"s":"")),k(()=>{J()})}catch(e){p.oR.error("Failed to upload files. Please try again."),console.error(e)}finally{E({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0})}},[null==M?void 0:M.id,H,Q,J]),et=(0,l.useCallback)(async e=>{if((null==M?void 0:M.id)&&H){E({uploading:!0,totalFiles:1,completedFiles:0,currentProgress:50});try{let t=(0,h.Rr)("url",e);await Q({type:"url",source_url:e,name:t}),E(e=>({...e,completedFiles:1,currentProgress:100})),p.oR.success("Successfully added URL artifact"),k(()=>{J()})}catch(e){p.oR.error("Failed to add URL artifact. Please try again."),console.error(e)}finally{E({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0})}}},[null==M?void 0:M.id,H,Q,J]),er=(0,l.useCallback)(async()=>{try{let e=await z("Page ".concat(String(I.length+1).padStart(2,"0")));e&&V(e.id)}catch(e){p.oR.error("Failed to create page. Please try again."),console.error("Failed to create page:",e)}},[z,I.length,V]),ea=(0,l.useCallback)(async e=>{try{await q(e)}catch(e){p.oR.error("Failed to delete page. Please try again."),console.error("Failed to delete page:",e)}},[q]),en=(0,l.useCallback)(async(e,t)=>{try{await U(e,{name:t})}catch(e){throw p.oR.error("Failed to rename page. Please try again."),console.error("Failed to rename page:",e),e}},[U]),el=(0,l.useCallback)(e=>{M&&(M.name=e)},[M]),es=(0,l.useCallback)(async e=>{if(M)try{let{moveProjectToFolder:t}=await Promise.resolve().then(r.bind(r,786));await t(M.id,e);let a=S.find(t=>t.id===e);p.oR.success("Moved to ".concat((null==a?void 0:a.name)||"folder")),M.folder_id=e}catch(e){p.oR.error("Failed to move project"),console.error(e)}},[M,S]),eo=(0,l.useCallback)(async()=>{if(M)try{let{removeProjectFromFolder:e}=await Promise.resolve().then(r.bind(r,786));await e(M.id),p.oR.success("Removed from folder"),M.folder_id=null}catch(e){p.oR.error("Failed to remove from folder"),console.error(e)}},[M]),ei=(0,l.useCallback)(()=>{(null==M?void 0:M.folder_id)?t.push("/folder?id=".concat(M.folder_id)):t.push("/projects")},[t,M]),ed=R.uploading||w;return M&&0!==I.length?(0,a.jsx)(X.A,{isLoading:!1,children:(0,a.jsxs)(c.A,{mode:"canvas",projectId:M.id,projectName:M.name,shareToken:M.share_token,creatorEmail:M.creator_id,isCreator:T,isCollaborator:D,isReadOnly:A,currentFolderId:M.folder_id,folders:S,onProjectNameUpdate:L?el:void 0,onMoveToFolder:L?es:void 0,onRemoveFromFolder:L?eo:void 0,onArtifactAdded:L?J:void 0,columns:o,onColumnsChange:y,showColumnControls:!0,pages:I,currentPageId:H||void 0,onPageSelect:V,onPageRename:en,onPageCreate:L?er:void 0,onPageDelete:L?ea:void 0,onBackToHome:ei,children:[(0,a.jsxs)("div",{className:"h-full relative",children:[(null==M?void 0:M.id)&&H&&L&&(0,a.jsx)(d,{onFiles:ee,onUrl:et,onDragStateChange:j}),(b||ed)&&(0,a.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"px-[var(--spacing-xl)] py-[var(--spacing-lg)] rounded-2xl bg-white/95 text-black shadow-xl",style:{fontSize:"var(--font-size-sm)"},children:b?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"font-medium",children:"Drop to upload"})}):(0,a.jsxs)("div",{className:"text-center space-y-3 min-w-[200px]",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Uploading",R.totalFiles>1?" ".concat(R.completedFiles+1," of ").concat(R.totalFiles):"","..."]}),R.uploading&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(R.currentProgress,"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[R.currentProgress,"%"]})]})]})})}),(0,a.jsx)("div",{className:"h-full pt-[var(--spacing-md)]",children:(0,a.jsx)(G,{columns:o,artifacts:W,onReorder:async e=>{try{await Z(e)}catch(e){p.oR.error("Failed to reorder artifacts. Please try again."),console.error("Failed to reorder artifacts:",e)}},onUpdateArtifact:async(e,t)=>{await Y(e,t)},onDeleteArtifact:async e=>{await $(e)},isReadOnly:A})})]}),(0,a.jsx)(B,{isReadOnly:P,onToggleReadOnly:C,projectInfo:M?{id:M.id,name:M.name,creator_id:M.creator_id,share_token:M.share_token}:void 0,userEmail:null==s?void 0:s.email})]})}):null}function H(){return(0,a.jsx)(l.Suspense,{fallback:null,children:(0,a.jsx)(q,{})})}},8306:(e,t,r)=>{Promise.resolve().then(r.bind(r,7680))},8436:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(8045),n=r(5177),l=r(691);function s(e){return{default:e&&"default"in e?e.default:e}}r(3326);let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},r=(0,n.lazy)(()=>t.loader().then(s)),i=t.loading;function d(e){let s=i?(0,a.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?n.Suspense:n.Fragment,c=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(d,{...o?{fallback:s}:{},children:c})}return d.displayName="LoadableComponent",d}}},e=>{e.O(0,[685,651,912,629,659,115,986,143,358],()=>e(e.s=8306)),_N_E=e.O()}]);