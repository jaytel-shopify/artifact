"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{626:(e,t,a)=>{a.d(t,{yv:()=>i});async function i(){return window.quick?window.quick:new Promise(e=>{let t=()=>{window.quick?e(window.quick):setTimeout(t,100)};t()})}},1266:(e,t,a)=>{a.d(t,{OG:()=>r,di:()=>s,y8:()=>i});let i={iphone15pro:{label:"iPhone 15 Pro",width:393,height:852},ipadAir:{label:"iPad Air",width:820,height:1180},laptop:{label:"Laptop",width:1512,height:900}},s="laptop";function r(e){let t=e?i[e]:i[s];return{width:t.width,height:t.height}}},1905:(e,t,a)=>{a.d(t,{C:()=>l});var i=a(3842),s=a(5177),r=a(3283);async function n(e){return await (0,r.ct)(e)}function l(e,t){let{data:a=[],error:l,isLoading:o,mutate:d}=(0,i.Ay)(t?"page-artifacts-".concat(t):null,()=>t?n(t):[],{revalidateOnFocus:!1}),c=(0,s.useCallback)(async a=>{if(!e||!t)return null;try{let i=await (0,r.X7)("artifacts",t,"page_id"),s=await (0,r.Dg)({project_id:e,page_id:t,type:a.type,source_url:a.source_url,file_path:a.file_path||void 0,name:a.name||"Untitled",position:i,metadata:a.metadata||{}});return await d(),s}catch(e){throw console.error("Failed to create artifact:",e),e}},[e,t,d]),u=(0,s.useCallback)(async a=>{if(e&&t){d(a,!1);try{let e=a.map((e,t)=>({id:e.id,position:t}));await (0,r.Br)(e),await d()}catch(e){throw await d(),console.error("Failed to reorder artifacts:",e),e}}},[e,t,d]);return{artifacts:a,isLoading:o,error:l,createArtifact:c,reorderArtifacts:u,updateArtifact:(0,s.useCallback)(async(t,a)=>{if(!e)return null;try{let e=await (0,r.eP)(t,a);return await d(),e}catch(e){throw console.error("Failed to update artifact:",e),e}},[e,d]),deleteArtifact:(0,s.useCallback)(async t=>{if(e)try{await (0,r.CM)(t),await d()}catch(e){throw console.error("Failed to delete artifact:",e),e}},[e,d]),refetch:d}}},2230:(e,t,a)=>{a.d(t,{A:()=>L});var i=a(8045),s=a(5177),r=a(4104),n=a(4988),l=a(2501),o=a(5860),d=a(9808),c=a(9069),u=a(9155),m=a(9355),f=a(6816);function h(e){let{className:t,defaultValue:a,value:r,min:n=0,max:l=100,...o}=e,d=s.useMemo(()=>Array.isArray(r)?r:Array.isArray(a)?a:[n,l],[r,a,n,l]);return(0,i.jsxs)(m.bL,{"data-slot":"slider",defaultValue:a,value:r,min:n,max:l,className:(0,f.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...o,children:[(0,i.jsx)(m.CC,{"data-slot":"slider-track",className:(0,f.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,i.jsx)(m.Q6,{"data-slot":"slider-range",className:(0,f.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,t)=>(0,i.jsx)(m.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}var p=a(7532);function g(e){let{...t}=e;return(0,i.jsx)(p.bL,{"data-slot":"dropdown-menu",...t})}function x(e){let{...t}=e;return(0,i.jsx)(p.l9,{"data-slot":"dropdown-menu-trigger",...t})}function v(e){let{className:t,sideOffset:a=4,...s}=e;return(0,i.jsx)(p.ZL,{children:(0,i.jsx)(p.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function w(e){let{className:t,inset:a,variant:s="default",...r}=e;return(0,i.jsx)(p.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":s,className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}var b=a(7023),j=a(3173),y=a(1266),N=a(1905),k=a(6835),_=a(8998),C=a(7651);function A(e){let{projectId:t,pageId:a,onAdded:r}=e,[n,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(""),[m,f]=(0,s.useState)([]),[h,p]=(0,s.useState)({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0}),[g,x]=(0,s.useState)(null),[v,w]=(0,s.useState)(y.di),{createArtifact:A}=(0,N.C)(t,a);function z(){d(""),f([]),x(null),w(y.di),p({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0})}async function P(){x(null);try{if(m.length){p({uploading:!0,totalFiles:m.length,completedFiles:0,currentProgress:0});let e=0;for(let t of m){let a=await (0,_.QM)(t,t=>{let a=t.percentage,i=Math.round((100*e+a)/m.length);p(e=>({...e,currentProgress:i}))}),i=(0,_.lu)(a.mimeType),s=(0,k.Rr)(i,a.fullUrl,t);await A({type:i,source_url:a.fullUrl,file_path:a.url,name:s}),e++,p(t=>({...t,completedFiles:e,currentProgress:Math.round(e/m.length*100)}))}}if(!m.length&&o){p({uploading:!0,totalFiles:1,completedFiles:0,currentProgress:50});let e=(0,y.OG)(v),t=(0,k.Rr)("url",o);await A({type:"url",source_url:o,name:t,metadata:{viewport:v,width:e.width,height:e.height}}),p(e=>({...e,completedFiles:1,currentProgress:100}))}m.length?C.oR.success("Successfully uploaded ".concat(m.length," file").concat(m.length>1?"s":"")):o&&C.oR.success("Successfully added URL artifact"),l(!1),z(),null==r||r()}catch(e){x(e.message),C.oR.error(e.message||"Upload failed. Please try again."),p({uploading:!1,totalFiles:0,completedFiles:0,currentProgress:0})}}return(0,i.jsxs)(b.lG,{open:n,onOpenChange:e=>{l(e),e||z()},children:[(0,i.jsx)(b.zM,{asChild:!0,children:(0,i.jsx)(u.$,{variant:"outline",size:"icon","aria-label":"Add artifact",children:(0,i.jsx)(c.A,{className:"h-4 w-4"})})}),(0,i.jsxs)(b.Cf,{className:"w-full max-w-2xl text-white border-white/10",style:{backgroundColor:"var(--color-background-secondary)"},showCloseButton:!h.uploading,children:[(0,i.jsxs)(b.c7,{children:[(0,i.jsx)(b.L3,{className:"text-white",children:"Add Artifact"}),(0,i.jsx)(b.rr,{className:"text-white/70",children:"Upload files or embed content via URL"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("p",{className:"text-sm text-white/70",children:"Upload files"}),(0,i.jsxs)("label",{className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-dashed border-white/20 bg-white/5 py-12 cursor-pointer transition hover:border-white/40",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:"Browse files"}),(0,i.jsx)("span",{className:"text-xs text-white/60",children:"Images, videos, or PDFs up to 20MB"}),(0,i.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*,application/pdf",className:"hidden",onChange:function(e){f(Array.from(e.target.files||[]))}})]}),m.length>0&&(0,i.jsxs)("div",{className:"text-xs text-white/60",children:[m.length," file",m.length>1?"s":""," selected"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3 text-sm text-white/40",children:[(0,i.jsx)("div",{className:"flex-1 h-px bg-white/15"}),"or",(0,i.jsx)("div",{className:"flex-1 h-px bg-white/15"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"text-sm text-white/70",children:"Embed via URL"}),(0,i.jsx)(j.p,{value:o,onChange:e=>d(e.target.value),placeholder:"https://example.com/artifact",className:"w-full bg-white/5 border-white/15 text-white placeholder:text-white/60 focus:border-white/30 focus:ring-white/20"})]}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 text-xs text-white/70",children:Object.entries(y.y8).map(e=>{let[t,a]=e;return(0,i.jsx)("button",{type:"button",onClick:()=>w(t),className:"rounded-full px-3 py-1 border transition cursor-pointer ".concat(v===t?"border-white/40 bg-white/20 text-white":"border-white/15 bg-white/5 text-white/70 hover:border-white/30"),children:a.label},t)})})]}),h.uploading&&(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"text-center text-sm text-white/80",children:["Uploading",h.totalFiles>1?" ".concat(h.completedFiles+1," of ").concat(h.totalFiles):"","..."]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(h.currentProgress,"%")}})}),(0,i.jsxs)("div",{className:"text-center text-xs text-white/60",children:[h.currentProgress,"%"]})]})]}),g&&(0,i.jsx)("div",{className:"text-sm text-red-400",children:g})]}),(0,i.jsxs)(b.Es,{children:[(0,i.jsx)(u.$,{variant:"ghost",onClick:()=>{l(!1),z()},disabled:h.uploading,className:"text-white hover:bg-white/10",children:"Cancel"}),(0,i.jsx)(u.$,{onClick:P,disabled:h.uploading||!m.length&&!o,className:"bg-white text-black hover:bg-white/90",children:h.uploading?"Uploading…":"Add"})]})]})]})}var z=a(6655),P=a(3283);function F(e){let{initialValue:t,projectId:a,onUpdated:r}=e,[n,l]=(0,s.useState)(t),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1);async function f(e){if(!a||!e.trim())return void l(t);m(!0);try{await (0,P.vr)(a,{name:e.trim()}),null==r||r(e.trim()),C.oR.success("Project name updated")}catch(e){console.error("Failed to update project name:",e),C.oR.error("Failed to update project name"),l(t)}finally{m(!1),d(!1)}}return(0,s.useEffect)(()=>{l(t)},[t]),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[o?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(j.p,{autoFocus:!0,value:n,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f(n)),"Escape"===e.key&&(l(t),d(!1))},className:"bg-white/10 border-white/20 text-white focus:bg-white/20 focus:border-white/40 focus:ring-white/30 min-w-[200px]",disabled:c}),(0,i.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>f(n),disabled:c,className:"h-8 w-8 text-white hover:bg-white/10","aria-label":"Save project name",children:(0,i.jsx)(z.A,{className:"h-4 w-4"})})]}):(0,i.jsx)("button",{type:"button",onClick:()=>d(!0),className:"text-left text-white font-semibold text-base px-2 py-1 rounded hover:bg-white/10 transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-white/30",children:(0,i.jsx)("span",{children:n||"Untitled Project"})}),c&&(0,i.jsx)("span",{className:"text-xs text-white/60 ml-2",children:"Saving…"})]})}var U=a(6198);function S(){let{user:e}=(0,U.A)();if(!e)return(0,i.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-sm font-medium",children:"?"});let t=e.fullName||e.email,a=t.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2);return e.slackImageUrl?(0,i.jsx)("img",{src:e.slackImageUrl,alt:t,className:"w-8 h-8 rounded-full",title:t}):(0,i.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium",title:t,children:a})}var I=a(5070);function L(e){var t,a;let{onBackToHome:m,onToggleSidebar:f,sidebarOpen:p,projectId:j,projectName:y,onProjectNameUpdate:N,onArtifactAdded:k,currentPageId:_,columns:C=3,onColumnsChange:z,showColumnControls:P=!0,onNewProject:L,mode:R}=e,[M,$]=(0,s.useState)(!1),{user:E,signIn:O,signOut:B,loading:Q}=(0,U.A)(),D=(0,I.useRouter)(),q=async()=>{await O()},T=async()=>{await B(),D.push("/auth/login")};return(0,i.jsx)("header",{className:"bg-[var(--color-background-primary)] border-b border-[var(--color-border-primary)] relative z-10",style:{height:"var(--header-height)"},children:(0,i.jsxs)("div",{className:"flex items-center justify-between h-full px-8",children:[(0,i.jsx)("div",{className:"flex items-center gap-3 w-full max-w-[var(--section-width)]",children:"homepage"===R?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("img",{src:"/favicons/icon-256.png",alt:"Artifact",className:"w-8 h-8",style:{imageRendering:"crisp-edges"}}),(0,i.jsx)("h1",{className:"text-lg font-semibold text-[var(--color-text-primary)]",children:"Artifact"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.$,{variant:"outline",size:"icon",onClick:m,"aria-label":"Back to home",className:"group relative overflow-hidden",children:[(0,i.jsx)("img",{src:"/favicons/icon-256.png",alt:"Back to home",className:"w-8 h-8 transition-all duration-200 group-hover:opacity-0 group-hover:scale-75",style:{imageRendering:"crisp-edges"}}),(0,i.jsx)(r.A,{className:"h-4 w-4 absolute inset-0 m-auto transition-all duration-200 opacity-0 scale-125 group-hover:opacity-100 group-hover:scale-100"})]}),(0,i.jsx)(u.$,{variant:"outline",size:"icon",onClick:f,"aria-label":p?"Close sidebar":"Open sidebar",children:p?(0,i.jsx)(n.A,{className:"h-4 w-4"}):(0,i.jsx)(l.A,{className:"h-4 w-4"})}),j&&_&&(0,i.jsx)(A,{projectId:j,pageId:_,onAdded:k}),P&&z&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("span",{className:"text-xs text-muted-foreground font-medium min-w-[12px]",children:C}),(0,i.jsx)("div",{className:"w-24",children:(0,i.jsx)(h,{min:1,max:8,value:[C],onValueChange:e=>{var t;return z(null!=(t=e[0])?t:C)},className:"w-full"})})]})})]})}),"canvas"===R&&j&&(0,i.jsx)("div",{className:"flex items-center justify-center w-full max-w-[var(--section-width)]",children:(0,i.jsx)(F,{initialValue:y||"Untitled Project",projectId:j,onUpdated:N})}),(0,i.jsx)("div",{className:"flex items-center justify-end gap-3 w-full max-w-[var(--section-width)]",children:"canvas"===R?(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)(b.lG,{open:M,onOpenChange:$,children:[(0,i.jsx)(b.zM,{asChild:!0,children:(0,i.jsxs)(u.$,{variant:"outline",className:"gap-2",children:[(0,i.jsx)(o.A,{className:"h-4 w-4"}),"Share"]})}),(0,i.jsxs)(b.Cf,{children:[(0,i.jsxs)(b.c7,{children:[(0,i.jsx)(b.L3,{children:"Share Project"}),(0,i.jsx)(b.rr,{children:"Share this project with others (functionality coming soon)"})]}),(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Share functionality will be implemented here."})})]})]}),E?(0,i.jsxs)(g,{children:[(0,i.jsx)(x,{asChild:!0,children:(0,i.jsx)("button",{className:"flex items-center gap-2",children:(0,i.jsx)(S,{})})}),(0,i.jsxs)(v,{align:"end",children:[(0,i.jsxs)(w,{disabled:!0,className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:null!=(t=E.fullName)?t:"Signed in"}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:E.email})]}),(0,i.jsxs)(w,{onClick:T,className:"text-red-600",children:[(0,i.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}):(0,i.jsx)(u.$,{onClick:q,disabled:Q,className:"gap-2",children:"Sign in"})]}):(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[L&&(0,i.jsxs)(u.$,{onClick:L,className:"gap-2",children:[(0,i.jsx)(c.A,{className:"h-4 w-4"}),"New Project"]}),E?(0,i.jsxs)(g,{children:[(0,i.jsx)(x,{asChild:!0,children:(0,i.jsx)("button",{className:"flex items-center gap-2",children:(0,i.jsx)(S,{})})}),(0,i.jsxs)(v,{align:"end",children:[(0,i.jsxs)(w,{disabled:!0,className:"flex flex-col items-start",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:null!=(a=E.fullName)?a:"Signed in"}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:E.email})]}),(0,i.jsxs)(w,{onClick:T,className:"text-red-600",children:[(0,i.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}):(0,i.jsx)(u.$,{onClick:q,disabled:Q,className:"gap-2",children:"Sign in"})]})})]})})}},3173:(e,t,a)=>{a.d(t,{p:()=>r});var i=a(8045);a(5177);var s=a(6816);function r(e){let{className:t,type:a,...r}=e;return(0,i.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}},3283:(e,t,a)=>{a.d(t,{Br:()=>w,CM:()=>v,Db:()=>m,Dg:()=>g,JQ:()=>s,L1:()=>r,X5:()=>d,X7:()=>b,XA:()=>u,a3:()=>c,ct:()=>p,eP:()=>x,gA:()=>n,oZ:()=>f,vr:()=>l,xx:()=>o,yg:()=>h});var i=a(626);async function s(e){let t=(await (0,i.yv)()).db.collection("projects"),a=await t.find();return e&&(a=a.filter(t=>t.creator_id===e)),a.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}async function r(e){let t=(await (0,i.yv)()).db.collection("projects");return(await t.find()).find(t=>t.share_token===e)||null}async function n(e){let t=(await (0,i.yv)()).db.collection("projects"),a={name:e.name,creator_id:e.creator_id,share_token:e.share_token,settings:e.settings||{default_columns:3,allow_viewer_control:!0,background_color:"#ffffff"}},s=await t.create(a);return await c({project_id:s.id,name:"Page 01",position:0}),s}async function l(e,t){let a=(await (0,i.yv)()).db.collection("projects");return await a.update(e,t),await a.findById(e)}async function o(e){let t=await (0,i.yv)(),a=await h(e);await Promise.all(a.map(e=>v(e.id)));let s=await d(e);await Promise.all(s.map(e=>m(e.id)));let r=t.db.collection("projects");await r.delete(e)}async function d(e){let t=(await (0,i.yv)()).db.collection("pages");return(await t.find()).filter(t=>t.project_id===e).sort((e,t)=>e.position-t.position)}async function c(e){let t=(await (0,i.yv)()).db.collection("pages");return await t.create(e)}async function u(e,t){let a=(await (0,i.yv)()).db.collection("pages");return await a.update(e,t),await a.findById(e)}async function m(e){let t=await (0,i.yv)(),a=await p(e);await Promise.all(a.map(e=>v(e.id)));let s=t.db.collection("pages");await s.delete(e)}async function f(e){let t=(await (0,i.yv)()).db.collection("pages");await Promise.all(e.map(e=>{let{id:a,position:i}=e;return t.update(a,{position:i})}))}async function h(e){let t=(await (0,i.yv)()).db.collection("artifacts");return(await t.find()).filter(t=>t.project_id===e).sort((e,t)=>e.position-t.position)}async function p(e){let t=(await (0,i.yv)()).db.collection("artifacts");return(await t.find()).filter(t=>t.page_id===e).sort((e,t)=>e.position-t.position)}async function g(e){let t=(await (0,i.yv)()).db.collection("artifacts"),a={project_id:e.project_id,page_id:e.page_id,type:e.type,source_url:e.source_url,file_path:e.file_path||null,name:e.name,position:e.position,metadata:e.metadata||{}};return await t.create(a)}async function x(e,t){let a=(await (0,i.yv)()).db.collection("artifacts");return await a.update(e,t),await a.findById(e)}async function v(e){let t=(await (0,i.yv)()).db.collection("artifacts");await t.delete(e)}async function w(e){let t=(await (0,i.yv)()).db.collection("artifacts");await Promise.all(e.map(e=>{let{id:a,position:i}=e;return t.update(a,{position:i})}))}async function b(e,t,a){let s=(await (0,i.yv)()).db.collection(e),r=(await s.find()).filter(e=>e[a]===t);return 0===r.length?0:Math.max(...r.map(e=>e.position||0))+1}},6198:(e,t,a)=>{a.d(t,{A:()=>o,AuthProvider:()=>l});var i=a(8045),s=a(5177),r=a(626);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=!0;return async function(){try{let t=await (0,r.yv)(),a=await t.id.waitForUser();console.log("Quick user loaded:",a),e&&(l({email:a.email,fullName:a.fullName,firstName:a.firstName,slackHandle:a.slackHandle,slackId:a.slackId,slackImageUrl:a.slackImageUrl,title:a.title,github:a.github}),d(!1))}catch(t){console.error("Failed to load Quick user:",t),e&&d(!1)}}(),()=>{e=!1}},[]),(0,i.jsx)(n.Provider,{value:{user:a,loading:o,isAuthenticated:!!a,signIn:async()=>{window.location.reload()},signOut:async()=>{console.warn("Sign out is handled by Quick platform - redirect to logout if needed")}},children:t})}function o(){let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},6436:(e,t,a)=>{a.d(t,{Ip:()=>o,Rc:()=>l,kt:()=>d,tz:()=>n});var i=a(8045);a(5177);var s=a(3726),r=a(6816);function n(e){let{...t}=e;return(0,i.jsx)(s.bL,{"data-slot":"context-menu",...t})}function l(e){let{...t}=e;return(0,i.jsx)(s.l9,{"data-slot":"context-menu-trigger",...t})}function o(e){let{className:t,...a}=e;return(0,i.jsx)(s.ZL,{children:(0,i.jsx)(s.UC,{"data-slot":"context-menu-content",className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...a})})}function d(e){let{className:t,inset:a,variant:n="default",...l}=e;return(0,i.jsx)(s.q7,{"data-slot":"context-menu-item","data-inset":a,"data-variant":n,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}},6816:(e,t,a)=>{a.d(t,{cn:()=>r});var i=a(2207),s=a(1251);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,i.$)(t))}},6835:(e,t,a)=>{function i(e){try{let t=new URL(e).hostname;return t.startsWith("www.")&&(t=t.substring(4)),t}catch(a){let t=e.match(/^https?:\/\/(?:www\.)?([^\/]+)/);return t?t[1]:"URL"}}function s(e,t,a){switch(e){case"image":case"video":case"pdf":if(a)return function(e){if(e instanceof File){let t=e.name,a=t.lastIndexOf(".");return a>0?t.substring(0,a):t}let t=e.toString(),a=t.split("/").pop()||t,i=a.lastIndexOf(".");return i>0?a.substring(0,i):a}(a);return i(t);case"url":case"figma":return i(t);default:return"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Artifact")}}a.d(t,{Rr:()=>s})},7023:(e,t,a)=>{a.d(t,{Cf:()=>u,Es:()=>f,L3:()=>h,c7:()=>m,lG:()=>l,rr:()=>p,zM:()=>o});var i=a(8045);a(5177);var s=a(1868),r=a(8227),n=a(6816);function l(e){let{...t}=e;return(0,i.jsx)(s.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,i.jsx)(s.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,i.jsx)(s.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,i.jsx)(s.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:l=!0,...o}=e;return(0,i.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,i.jsx)(c,{}),(0,i.jsxs)(s.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,l&&(0,i.jsxs)(s.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,i.jsx)(r.A,{}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function f(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function h(e){let{className:t,...a}=e;return(0,i.jsx)(s.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,i.jsx)(s.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}},8998:(e,t,a)=>{a.d(t,{QM:()=>s,lu:()=>r});var i=a(626);async function s(e,t){let a=await (0,i.yv)();console.log("Uploading file to Quick.fs:",e.name,e.type,e.size);let s=await a.fs.uploadFile(e,{onProgress:e=>{console.log("Upload progress:",e),null==t||t(e)}});return console.log("Quick.fs upload result:",s),{url:s.url,fullUrl:s.fullUrl,size:s.size,mimeType:s.mimeType}}function r(e){if(e.startsWith("image/"));else if(e.startsWith("video/"))return"video";else if("application/pdf"===e)return"pdf";return"image"}},9155:(e,t,a)=>{a.d(t,{$:()=>o,r:()=>l});var i=a(8045);a(5177);var s=a(3725),r=a(1399),n=a(6816);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive cursor-pointer",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:r,asChild:o=!1,...d}=e,c=o?s.DX:"button";return(0,i.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:a,size:r,className:t})),...d})}}}]);